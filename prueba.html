<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Marvel Comics Selection</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #c62828;
      --card-bg: #1a1a1a;
      --text-color: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: system-ui, -apple-system, sans-serif;
    }

    body {
      background-color: #121212;
      color: var(--text-color);
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 100px;
    }

    .card {
      background: var(--card-bg);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .card.selected {
      border-color: var(--primary-color);
    }

    .card-id {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0, 0, 0, 0.7);
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      color: #fff;
      z-index: 2;
    }

    .card-checkbox {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 24px;
      height: 24px;
      opacity: 0;
      cursor: pointer;
      z-index: 2;
    }

    .checkbox-indicator {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 24px;
      height: 24px;
      background: rgba(0, 0, 0, 0.5);
      border: 2px solid #fff;
      border-radius: 6px;
      pointer-events: none;
    }

    .card.selected .checkbox-indicator {
      background: var(--primary-color);
      border-color: var(--primary-color);
    }

    .card.selected .checkbox-indicator:after {
      content: 'âœ“';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: white;
    }

    .card-image {
      width: 100%;
      height: 280px;
      object-fit: cover;
      display: block;
    }

    .card-info {
      padding: 15px;
    }

    .card-title {
      font-size: 0.9rem;
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .card-metadata {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
      color: #888;
      margin-bottom: 8px;
    }

    .card-creators {
      font-size: 0.8rem;
      color: #666;
      margin-top: 8px;
      margin-bottom: 12px;
    }

    .add-favorite-btn {
      width: 100%;
      padding: 8px;
      background-color: transparent;
      border: 2px solid var(--primary-color);
      border-radius: 6px;
      color: var(--primary-color);
      cursor: pointer;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      transition: all 0.3s ease;
    }

    .add-favorite-btn:hover {
      background-color: var(--primary-color);
      color: white;
    }

    .add-favorite-btn.added {
      background-color: var(--primary-color);
      color: white;
    }

    .actions-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(26, 26, 26, 0.95);
      padding: 15px 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      backdrop-filter: blur(10px);
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .actions-bar.visible {
      transform: translateY(0);
    }

    .selected-count {
      font-size: 0.9rem;
      color: #888;
    }

    .save-favorites-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: background 0.3s ease;
    }

    .save-favorites-btn:hover {
      background: #b71c1c;
    }

    @media (max-width: 768px) {
      .cards-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 15px;
      }

      .card-image {
        height: 220px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="cards-grid" id="cardsContainer">
      <!-- Cards will be inserted here -->
    </div>
  </div>

  <div class="actions-bar" id="actionsBar">
    <span class="selected-count">0 comics selected</span>
    <button class="save-favorites-btn" onclick="saveFavorites()">
      Save to Favorites
    </button>
  </div>

  <script>
    // Sample data structure
    const comicsData = [
      {
        id: 15808,
        title: "Ultimate Spider-Man (2000) #110 (Mark Bagley Variant)",
        issueNumber: 110,
        pageCount: 1,
        price: 2.99,
        thumbnail: {
          path: "http://i.annihil.us/u/prod/marvel/i/mg/c/e0/4bc4947ea8f47",
          extension: "jpg"
        },
        creators: [ "Mark Bagley", "Richard Isanove", "Brian Michael Bendis" ],
        characters: [ "Spider-Man (Ultimate)" ],
        description: "#N/A"
      },
      // Add more comics as needed
    ];

    // Keep track of selected comics and individual favorites
    let selectedComics = new Set();
    let individualFavorites = new Set();

    // Create and render comic cards
    function renderComics ( comics ) {
      const container = document.getElementById( 'cardsContainer' );
      container.innerHTML = comics.map( comic => `
                <div class="card" data-id="${ comic.id }">
                    <div class="card-id">ID: ${ comic.id }</div>
                    <input type="checkbox" class="card-checkbox" onchange="toggleSelect(${ comic.id })">
                    <div class="checkbox-indicator"></div>
                    <img src="${ comic.thumbnail.path }.${ comic.thumbnail.extension }" 
                         alt="${ comic.title }" 
                         class="card-image">
                    <div class="card-info">
                        <h3 class="card-title">${ comic.title }</h3>
                        <div class="card-metadata">
                            <span>Issue #${ comic.issueNumber }</span>
                            <span>$${ comic.price }</span>
                        </div>
                        <div class="card-creators">
                            ${ comic.creators.slice( 0, 2 ).join( ', ' ) }
                            ${ comic.creators.length > 2 ? '...' : '' }
                        </div>
                        <button class="add-favorite-btn" onclick="toggleIndividualFavorite(${ comic.id })">
                            <i class="far fa-heart"></i>
                            Add to Favorites
                        </button>
                    </div>
                </div>
            `).join( '' );

      // Restore state for individual favorites
      individualFavorites.forEach( id => {
        const btn = document.querySelector( `.card[data-id="${ id }"] .add-favorite-btn` );
        if ( btn ) {
          btn.innerHTML = '<i class="fas fa-heart"></i> Added to Favorites';
          btn.classList.add( 'added' );
        }
      } );
    }

    // Toggle individual favorite
    function toggleIndividualFavorite ( comicId ) {
      const btn = document.querySelector( `.card[data-id="${ comicId }"] .add-favorite-btn` );
      if ( individualFavorites.has( comicId ) ) {
        individualFavorites.delete( comicId );
        btn.innerHTML = '<i class="far fa-heart"></i> Add to Favorites';
        btn.classList.remove( 'added' );
      } else {
        individualFavorites.add( comicId );
        btn.innerHTML = '<i class="fas fa-heart"></i> Added to Favorites';
        btn.classList.add( 'added' );
      }
    }

    // Toggle comic selection
    function toggleSelect ( comicId ) {
      const card = document.querySelector( `.card[data-id="${ comicId }"]` );
      if ( selectedComics.has( comicId ) ) {
        selectedComics.delete( comicId );
        card.classList.remove( 'selected' );
      } else {
        selectedComics.add( comicId );
        card.classList.add( 'selected' );
      }
      updateActionsBar();
    }

    // Update the actions bar visibility and count
    function updateActionsBar () {
      const actionsBar = document.getElementById( 'actionsBar' );
      const countDisplay = actionsBar.querySelector( '.selected-count' );
      const count = selectedComics.size;

      countDisplay.textContent = `${ count } comic${ count !== 1 ? 's' : '' } selected`;
      actionsBar.classList.toggle( 'visible', count > 0 );
    }

    // Save selected comics to favorites
    function saveFavorites () {
      const selectedComicsList = Array.from( selectedComics ).map( id =>
        comicsData.find( comic => comic.id === id )
      );
      console.log( 'Saving to favorites:', selectedComicsList );
      // Add your favoritos saving logic here

      // Add selected comics to individual favorites
      selectedComics.forEach( id => {
        individualFavorites.add( id );
        const btn = document.querySelector( `.card[data-id="${ id }"] .add-favorite-btn` );
        if ( btn ) {
          btn.innerHTML = '<i class="fas fa-heart"></i> Added to Favorites';
          btn.classList.add( 'added' );
        }
      } );

      // Clear selection after saving
      selectedComics.clear();
      document.querySelectorAll( '.card.selected' ).forEach( card => {
        card.classList.remove( 'selected' );
        card.querySelector( '.card-checkbox' ).checked = false;
      } );
      updateActionsBar();
    }

    // Initial render
    renderComics( comicsData );
  </script>
</body>

</html>